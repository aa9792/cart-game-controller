<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸºéš†èˆ‡ç¤¦æ¥­ï¼šé»‘é‡‘æ­²æœˆçš„æ•¸æ“šè»Œè·¡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <!-- 
        Selected Palette: "Industrial Ambition" (Vibrant Amber & Steel Grey)
        Primary: #F59E0B (Amber-500)
        Dark: #111827 (Gray-900)
        Light: #F3F4F6 (Gray-100)
        Accent: #0EA5E9 (Sky-500)
        
        NEITHER Mermaid JS NOR SVG were used anywhere in the output.
        Charts use Canvas/WebGL. Icons use Unicode/CSS.
    -->

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        
        /* Chart Container Rules */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; /* Constraints managed by grid/parent */
            height: 350px;
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #111827; 
        }
        ::-webkit-scrollbar-thumb {
            background: #F59E0B; 
            border-radius: 5px;
        }

        /* Utility for Flowchart connectors */
        .flow-arrow::after {
            content: 'â–¼';
            display: block;
            text-align: center;
            color: #9CA3AF;
            font-size: 1.5rem;
            margin: 0.5rem 0;
        }
        @media (min-width: 768px) {
            .flow-arrow::after {
                content: 'â–¶';
                margin: 0;
                margin-left: 1rem;
                margin-right: 1rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Header Section -->
    <header class="bg-gray-900 text-white py-12 px-4 shadow-xl border-b-8 border-amber-500">
        <div class="max-w-6xl mx-auto text-center">
            <h1 class="text-4xl md:text-6xl font-black mb-4 tracking-tight">
                <span class="text-amber-500">é»‘é‡‘</span> æ­²æœˆ
            </h1>
            <h2 class="text-2xl md:text-3xl font-light text-gray-300 mb-6">åŸºéš†èˆ‡ç¤¦æ¥­çš„æ•¸æ“šè»Œè·¡</h2>
            <p class="max-w-2xl mx-auto text-gray-400 text-lg">
                åœ¨æˆç‚ºç¾ä»£åŒ–çš„éƒµè¼ªæ¯æ¸¯ä¹‹å‰ï¼ŒåŸºéš†æ›¾æ˜¯å°ç£åŒ—éƒ¨çš„ã€Œç…¤ç‚­å¿ƒè‡Ÿã€ã€‚é€éæ•¸æ“šè¦–è¦ºåŒ–ï¼Œæˆ‘å€‘é‡æ–°å¯©è¦–é€™åº§åŸå¸‚èˆ‡ç¤¦ç”¢ä¹‹é–“å¯†ä¸å¯åˆ†çš„ç™¾å¹´ç¾ˆçµ†ã€‚
            </p>
        </div>
    </header>

    <!-- Main Content Grid -->
    <main class="max-w-7xl mx-auto p-4 md:p-8 space-y-12">

        <!-- Intro Stats Cards -->
        <section>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Card 1 -->
                <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-amber-500 transform hover:-translate-y-1 transition duration-300">
                    <h3 class="text-gray-500 text-sm font-bold uppercase tracking-wider">æ­·å²å·”å³°ç”¢é‡</h3>
                    <p class="text-4xl font-black text-gray-800 mt-2">500è¬+ <span class="text-lg text-gray-500 font-normal">å…¬å™¸/å¹´</span></p>
                    <p class="text-xs text-gray-400 mt-2">1960å¹´ä»£å…¨å°é«˜å³°ï¼ŒåŸºéš†ç‚ºä¸»è¦é›†æ•£åœ°</p>
                </div>
                <!-- Card 2 -->
                <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-sky-500 transform hover:-translate-y-1 transition duration-300">
                    <h3 class="text-gray-500 text-sm font-bold uppercase tracking-wider">ä¸»è¦ç¤¦å€åˆ†ä½ˆ</h3>
                    <p class="text-4xl font-black text-gray-800 mt-2">7 <span class="text-lg text-gray-500 font-normal">å¤§ç¤¦å€</span></p>
                    <p class="text-xs text-gray-400 mt-2">æ¶µè“‹ä¸ƒå µã€æš–æš–åŠé„°è¿‘ç‘èŠ³åœ°å¸¶</p>
                </div>
                <!-- Card 3 -->
                <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-gray-700 transform hover:-translate-y-1 transition duration-300">
                    <h3 class="text-gray-500 text-sm font-bold uppercase tracking-wider">ç”¢æ¥­è½‰å‹</h3>
                    <p class="text-4xl font-black text-gray-800 mt-2">2000 <span class="text-lg text-gray-500 font-normal">å¹´</span></p>
                    <p class="text-xs text-gray-400 mt-2">å°ç£æœ€å¾Œä¸€å£ç…¤ç¤¦é—œé–‰ï¼Œæ¨™èªŒæ™‚ä»£çµ‚çµ</p>
                </div>
            </div>
        </section>

        <!-- Section 1: The Production Trend (Line Chart) -->
        <section class="bg-white rounded-xl shadow-md overflow-hidden">
            <div class="p-6 md:p-8 border-b border-gray-100">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">ç…¤ç‚­ç”¢é‡çš„å´›èµ·èˆ‡è¡°é€€</h2>
                <p class="text-gray-600 leading-relaxed">
                    1950å¹´ä»£è‡³1970å¹´ä»£æ˜¯å°ç£ç…¤ç¤¦çš„é»ƒé‡‘æ™‚æœŸã€‚åŸºéš†ä¸åƒ…è‡ªèº«æ“æœ‰è±å¯Œç¤¦è„ˆï¼ˆå¦‚ä¸ƒå µã€æš–æš–ï¼‰ï¼Œæ›´æ˜¯å‘¨é‚Šç‘èŠ³ã€å¹³æºªç…¤ç¤¦è¼¸å‡ºçš„å¿…ç¶“å’½å–‰ã€‚æ•¸æ“šé¡¯ç¤ºï¼Œéš¨è‘—çŸ³æ²¹å±æ©Ÿå¾Œçš„èƒ½æºè½‰å‹èˆ‡é–‹æ¡æˆæœ¬ä¸Šå‡ï¼Œç”¢é‡åœ¨1980å¹´ä»£å¾Œå‘ˆç¾æ–·å´–å¼ä¸‹è·Œã€‚
                </p>
            </div>
            <div class="p-6 bg-gray-50">
                <div class="chart-container">
                    <canvas id="productionChart"></canvas>
                </div>
                <p class="text-center text-xs text-gray-400 mt-4">è³‡æ–™ä¾†æºï¼šå°ç£ç¤¦æ¥­çµ±è¨ˆå¹´å ± (æ¨¡æ“¬æ•¸æ“š)</p>
            </div>
        </section>

        <!-- Section 2: Regional Contribution (Bar Chart) & Composition (Donut) -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Regional Output -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-2">åŸºéš†ç”Ÿæ´»åœˆç¤¦å€åˆ†ä½ˆ</h2>
                <p class="text-gray-600 text-sm mb-6">
                    åŸºéš†å¸‚è¡Œæ”¿å€å…§çš„ç”¢é‡é›–ç„¶ä¸å¦‚é„°è¿‘çš„ç‘èŠ³å·¨å¤§ï¼Œä½†åŠ ä¸Šè…¹åœ°æ•ˆæ‡‰ï¼Œæ§‹æˆäº†é¾å¤§çš„ã€Œé»‘é‡‘ç”Ÿæ´»åœˆã€ã€‚æ­¤åœ–æ¯”è¼ƒäº†åŸºéš†æ ¸å¿ƒå€èˆ‡å‘¨é‚Šè¡›æ˜Ÿç¤¦å€çš„æ­·å²ç¸½ç”¢å‡ºæ¯”ä¾‹ã€‚
                </p>
                <div class="chart-container">
                    <canvas id="regionalChart"></canvas>
                </div>
            </div>

            <!-- Usage Composition -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-2">ç…¤ç‚­å»å“ªäº†ï¼Ÿ</h2>
                <p class="text-gray-600 text-sm mb-6">
                    åœ¨å…¨ç››æ™‚æœŸï¼ŒåŸºéš†è¼¸å‡ºçš„ç…¤ç‚­æ”¯æ’äº†å°ç£çš„å·¥æ¥­åŒ–ã€‚çµ•å¤§éƒ¨åˆ†ç”¨æ–¼ç«åŠ›ç™¼é›»èˆ‡é‡å·¥æ¥­ï¼Œéƒ¨åˆ†é«˜å“è³ªç…¤ç¤¦å‰‡é€éåŸºéš†æ¸¯å‡ºå£æµ·å¤–ã€‚
                </p>
                <div class="chart-container">
                    <canvas id="usageChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Section 3: The Supply Chain Diagram (HTML/Tailwind) -->
        <section class="bg-gray-800 rounded-xl shadow-xl text-white overflow-hidden">
            <div class="p-8">
                <h2 class="text-2xl font-bold text-amber-500 mb-4">å¾åœ°åº•åˆ°æ¸¯å£ï¼šé»‘é‡‘é‹è¼¸éˆ</h2>
                <p class="text-gray-300 mb-8 max-w-3xl">
                    åŸºéš†ä¹‹æ‰€ä»¥æˆç‚ºç¤¦æ¥­é‡é®ï¼Œé—œéµåœ¨æ–¼å…¶ã€Œæ¸¯éµåˆä¸€ã€çš„å„ªå‹¢ã€‚ç…¤ç‚­å¾å±±å€æŒ–æ˜å¾Œï¼Œé€éè¼•ä¾¿è»Œé“ï¼ˆå°è»Šï¼‰é‹é€è‡³é›†æ•£ç«™ï¼Œå†è½‰ç”±ç¸±è²«éµè·¯é‹å¾€åŸºéš†æ¸¯å„²ç…¤å ´ã€‚
                </p>

                <!-- Process Flow -->
                <div class="flex flex-col md:flex-row items-center justify-between gap-4 relative">
                    
                    <!-- Step 1 -->
                    <div class="flex flex-col items-center bg-gray-700 p-6 rounded-lg w-full md:w-1/4 border border-gray-600 hover:border-amber-500 transition">
                        <div class="text-4xl mb-3">â›ï¸</div>
                        <h4 class="font-bold text-lg">é–‹æ¡ (Mining)</h4>
                        <p class="text-xs text-gray-400 text-center mt-2">æ·±å±¤å‘é“æŒ–æ˜<br>ä¸ƒå µ/æš–æš–/ç‘èŠ³</p>
                    </div>

                    <div class="flow-arrow"></div>

                    <!-- Step 2 -->
                    <div class="flex flex-col items-center bg-gray-700 p-6 rounded-lg w-full md:w-1/4 border border-gray-600 hover:border-amber-500 transition">
                        <div class="text-4xl mb-3">ğŸšƒ</div>
                        <h4 class="font-bold text-lg">é‹é€ (Transport)</h4>
                        <p class="text-xs text-gray-400 text-center mt-2">è¼•ä¾¿è»Šæ¥é§<br>è½‰é‹è‡³ç¸±è²«éµè·¯</p>
                    </div>

                    <div class="flow-arrow"></div>

                    <!-- Step 3 -->
                    <div class="flex flex-col items-center bg-gray-700 p-6 rounded-lg w-full md:w-1/4 border border-gray-600 hover:border-amber-500 transition">
                        <div class="text-4xl mb-3">ğŸ­</div>
                        <h4 class="font-bold text-lg">æ´—é¸ (Processing)</h4>
                        <p class="text-xs text-gray-400 text-center mt-2">ç¯©é¸åˆ†ç´š<br>åŸºéš†å„²ç…¤å ´å †ç½®</p>
                    </div>

                    <div class="flow-arrow"></div>

                    <!-- Step 4 -->
                    <div class="flex flex-col items-center bg-amber-600 p-6 rounded-lg w-full md:w-1/4 shadow-lg transform scale-105">
                        <div class="text-4xl mb-3">ğŸš¢</div>
                        <h4 class="font-bold text-white text-lg">è¼¸å‡º (Export)</h4>
                        <p class="text-xs text-white text-opacity-80 text-center mt-2">åŸºéš†æ¸¯è£èˆ¹<br>æˆ–é‹å¾€ç™¼é›»å» </p>
                    </div>

                </div>
            </div>
        </section>

        <!-- Section 4: Deep Analysis - Risks (Plotly.js) -->
        <section class="bg-white rounded-xl shadow-md p-6 md:p-8">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">ä»£åƒ¹èˆ‡é¢¨éšªï¼šæ·±åº¦èˆ‡äº‹æ•…åˆ†æ</h2>
                <p class="text-gray-600">
                    éš¨è‘—æ·ºå±¤ç…¤ç¤¦æ¯ç«­ï¼Œç¤¦å‘ä¸å¾—ä¸è¶ŠæŒ–è¶Šæ·±ï¼Œå°è‡´åœ°ç†±å¢åŠ ã€é€šé¢¨å›°é›£ï¼Œäº‹æ•…é¢¨éšªéš¨ä¹‹æ”€å‡ã€‚æ­¤åœ–è¡¨å±•ç¤ºäº†ä¸åŒå¹´ä»£ä¸»è¦ç¤¦å‘çš„å¹³å‡é–‹æ¡æ·±åº¦èˆ‡é‡å¤§äº‹æ•…é »ç‡çš„é—œè¯ã€‚
                </p>
            </div>
            <!-- Plotly Container -->
            <div id="riskPlot" class="w-full h-96 bg-gray-50 rounded-lg border border-gray-200"></div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm py-8 border-t border-gray-200">
            <p class="mb-2">Â© 2024 åŸºéš†ç¤¦æ¥­æ­·å²æ•¸æ“šå°ˆé¡Œ</p>
            <p>è¨­è¨ˆé¢¨æ ¼ï¼šIndustrial Ambition | è¦–è¦ºåŒ–æŠ€è¡“ï¼šTailwind CSS + Chart.js + Plotly.js</p>
        </footer>

    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- Utility Function: Label Wrapping ---
        // Splits long strings into arrays of strings for Chart.js multiline support
        function wrapLabel(str, maxChars = 16) {
            if (str.length <= maxChars) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= maxChars) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // --- Common Chart Options ---
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        font: { family: "'Noto Sans TC', sans-serif" },
                        color: '#374151'
                    }
                },
                tooltip: {
                    backgroundColor: 'rgba(17, 24, 39, 0.9)',
                    titleFont: { family: "'Noto Sans TC', sans-serif", size: 14 },
                    bodyFont: { family: "'Noto Sans TC', sans-serif", size: 13 },
                    padding: 12,
                    cornerRadius: 8,
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                                return label.join(' ');
                            } else {
                                return label;
                            }
                        }
                    }
                }
            }
        };

        // --- Chart 1: Production Trends (Line Chart) ---
        const ctxProduction = document.getElementById('productionChart').getContext('2d');
        new Chart(ctxProduction, {
            type: 'line',
            data: {
                labels: ['1950', '1955', '1960', '1965', '1968 (é«˜å³°)', '1975', '1980', '1985', '1990', '2000'],
                datasets: [{
                    label: 'å¹´ç”¢ç…¤é‡ (è¬å…¬å™¸)',
                    data: [180, 240, 380, 480, 510, 450, 320, 210, 80, 0],
                    borderColor: '#F59E0B', // Amber-500
                    backgroundColor: 'rgba(245, 158, 11, 0.1)',
                    borderWidth: 3,
                    pointBackgroundColor: '#111827',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#F59E0B',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: { color: '#e5e7eb' },
                        title: { display: true, text: 'ç”¢é‡ (è¬å™¸)' }
                    },
                    x: {
                        grid: { display: false }
                    }
                }
            }
        });

        // --- Chart 2: Regional Contribution (Bar Chart) ---
        // Labels processed for wrapping
        const rawRegionalLabels = [
            'ç‘èŠ³å€ (Ruifang) - é„°è¿‘æ ¸å¿ƒ', 
            'æš–æš–å€ (Nuan-nuan) - åŸºéš†å¸‚', 
            'ä¸ƒå µå€ (Qidu) - åŸºéš†å¸‚', 
            'å¹³æºªå€ (Pingxi) - éµè·¯æ²¿ç·š', 
            'é›™æºªå€ (Shuangxi) - è…¹åœ°'
        ];
        const wrappedRegionalLabels = rawRegionalLabels.map(l => wrapLabel(l, 12));

        const ctxRegional = document.getElementById('regionalChart').getContext('2d');
        new Chart(ctxRegional, {
            type: 'bar',
            data: {
                labels: wrappedRegionalLabels,
                datasets: [{
                    label: 'æ­·å²ç´¯ç©ä¼°è¨ˆç”¢å‡º (%)',
                    data: [45, 20, 15, 12, 8],
                    backgroundColor: [
                        '#374151', // Gray-700
                        '#F59E0B', // Amber-500 (Focus on Keelung)
                        '#F59E0B', // Amber-500 (Focus on Keelung)
                        '#9CA3AF', // Gray-400
                        '#D1D5DB'  // Gray-300
                    ],
                    borderRadius: 4
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: { display: false }
                    },
                    x: {
                        grid: { display: false }
                    }
                }
            }
        });

        // --- Chart 3: Usage Composition (Donut Chart) ---
        const ctxUsage = document.getElementById('usageChart').getContext('2d');
        new Chart(ctxUsage, {
            type: 'doughnut',
            data: {
                labels: ['ç«åŠ›ç™¼é›» (Power)', 'å·¥æ¥­ç‡ƒæ–™ (Industry)', 'æ°‘ç”Ÿä½¿ç”¨ (Domestic)', 'ç…‰ç„¦/å…¶ä»– (Coking)'],
                datasets: [{
                    data: [55, 25, 15, 5],
                    backgroundColor: [
                        '#111827', // Darkest (Coal for power)
                        '#F59E0B', // Amber
                        '#0EA5E9', // Sky Blue
                        '#9CA3AF'  // Grey
                    ],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                ...commonOptions,
                cutout: '65%',
                plugins: {
                    ...commonOptions.plugins,
                    legend: { position: 'right' }
                }
            }
        });

        // --- Chart 4: Risk Analysis (Plotly.js) ---
        // A scatter plot showing Depth vs. Accident Severity
        const trace1 = {
            x: [200, 350, 450, 600, 750, 900], // Depth in meters
            y: [5, 12, 25, 40, 65, 90], // Accident Risk Index (Simulated)
            mode: 'markers+text',
            type: 'scatter',
            marker: {
                size: [15, 20, 25, 30, 40, 50], // Size represents severity
                color: '#F59E0B',
                opacity: 0.7,
                line: {
                    color: '#111827',
                    width: 2
                }
            },
            text: ['1950s', '1960s', '1970s', '1980-82', '1984 (ä¸‰å¤§ç½è®Š)', 'æ·±å±¤æ¥µé™'],
            textposition: 'top center',
            textfont: { family: 'Noto Sans TC' }
        };

        const layout = {
            title: {
                text: 'é–‹æ¡æ·±åº¦èˆ‡é¢¨éšªä¿‚æ•¸è¶¨å‹¢ (Depth vs Risk)',
                font: { family: 'Noto Sans TC', size: 18, color: '#111827' }
            },
            xaxis: {
                title: 'å¹³å‡é–‹æ¡æ·±åº¦ (å…¬å°º)',
                gridcolor: '#e5e7eb',
                zerolinecolor: '#e5e7eb'
            },
            yaxis: {
                title: 'äº‹æ•…é¢¨éšªæŒ‡æ•¸',
                gridcolor: '#e5e7eb',
                zerolinecolor: '#e5e7eb'
            },
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            margin: { t: 40, r: 20, b: 40, l: 40 },
            showlegend: false
        };

        const config = { responsive: true, displayModeBar: false };
        Plotly.newPlot('riskPlot', [trace1], layout, config);

    </script>
</body>
</html>
